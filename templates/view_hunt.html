<!DOCTYPE html>
<html>
<head>
    <title>View Hunt - {{ hunt.name }}</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: #f5f7fa; color: #333; }
        .navbar { background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%); color: white; padding: 20px 40px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8em; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-link { color: white; text-decoration: none; padding: 8px 15px; border-radius: 5px; transition: background 0.3s; }
        .nav-link:hover { background: rgba(255,255,255,0.1); }
        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: #666; text-decoration: none; margin-bottom: 20px; }
        .hunt-header { background: white; border-radius: 15px; padding: 30px; margin-bottom: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-left: 5px solid #4CAF50; }
        .hunt-title { font-size: 2em; color: #333; margin-bottom: 10px; display: flex; align-items: center; gap: 15px; }
        .hunt-description { color: #666; line-height: 1.6; margin-bottom: 20px; }
        .hunt-meta { display: flex; gap: 30px; color: #777; font-size: 0.9em; }
        .questions-section { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-bottom: 30px; }
        .section-title { font-size: 1.5em; color: #333; margin-bottom: 25px; display: flex; align-items: center; gap: 10px; }
        .question-item { background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 15px; border-left: 4px solid #2196F3; }
        .question-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .question-type { background: #e3f2fd; color: #2196F3; padding: 3px 10px; border-radius: 20px; font-size: 0.8em; font-weight: bold; }
        .question-text { color: #444; margin-bottom: 15px; line-height: 1.5; }
        .question-details { background: #fff; padding: 15px; border-radius: 8px; margin-top: 10px; }
        .detail-row { display: flex; margin-bottom: 8px; }
        .detail-label { font-weight: bold; width: 150px; color: #666; }
        .qr-section { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .qr-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
        .qr-item { text-align: center; padding: 15px; background: #f8f9fa; border-radius: 10px; }
        .qr-image { max-width: 150px; height: auto; margin-bottom: 10px; border: 2px solid #ddd; border-radius: 8px; }
        .btn { padding: 12px 25px; border: none; border-radius: 8px; font-size: 1em; font-weight: bold; cursor: pointer; transition: all 0.3s; text-decoration: none; display: inline-block; }
        .btn-primary { background: #4CAF50; color: white; }
        .btn-primary:hover { background: #45a049; transform: translateY(-2px); }
        .btn-secondary { background: #f5f5f5; color: #666; border: 1px solid #ddd; }
        .btn-secondary:hover { background: #e0e0e0; }
        .button-group { display: flex; gap: 15px; margin-top: 30px; }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo"><span>üéØ</span> Scavenger Hunt</div>
        <div class="nav-links">
            <a href="/teacher/dashboard" class="nav-link">Dashboard</a>
            <a href="/logout" class="nav-link">Logout</a>
        </div>
    </div>
    
    <div class="container">
        <a href="/teacher/dashboard" class="back-link">‚Üê Back to Dashboard</a>
        
        <!-- Hunt Header -->
        <div class="hunt-header">
            <div class="hunt-title">
                <span>üìã</span> {{ hunt.name }}
            </div>
            {% if hunt.description %}
            <div class="hunt-description">
                {{ hunt.description }}
            </div>
            {% endif %}
            <div class="hunt-meta">
                <div>Created: {{ hunt.created_at.strftime('%B %d, %Y') if hunt.created_at else 'Recently' }}</div>
                <div>Questions: {{ hunt.questions|length }}</div>
                <div>Status: <span style="color: {{ 'green' if hunt.is_active else 'gray' }}">{{ 'Active' if hunt.is_active else 'Inactive' }}</span></div>
            </div>
        </div>
        
        <!-- Questions Section -->
        <div class="questions-section">
            <div class="section-title">
                <span>‚ùì</span> Questions ({{ hunt.questions|length }})
            </div>
            
            {% if hunt.questions %}
                {% for question in hunt.questions %}
                <div class="question-item">
                    <div class="question-header">
                        <div><strong>Question {{ loop.index }}</strong></div>
                        <div class="question-type">
                            {% if question.type == 'multiple-choice' %}üìù Multiple Choice
                            {% elif question.type == 'text' %}‚úçÔ∏è Text Answer
                            {% elif question.type == 'image' %}üñºÔ∏è Image Question
                            {% endif %}
                        </div>
                    </div>
                    <div class="question-text">{{ question.text }}</div>
                    
                    <div class="question-details">
                        {% if question.type == 'multiple-choice' %}
                        <div class="detail-row">
                            <span class="detail-label">Choices:</span>
                            <span>{{ question.choices|join(', ') }}</span>
                        </div>
                        {% endif %}
                        <div class="detail-row">
                            <span class="detail-label">Correct Answer:</span>
                            <span>{{ question.correct_answer }}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Clue:</span>
                            <span>{{ question.clue }}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Points:</span>
                            <span>{{ question.points }}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">QR Code:</span>
                            <a href="/qr/{{ question.qr_filename }}" target="_blank">View QR Code</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div style="text-align: center; padding: 40px; color: #999;">
                    No questions added to this hunt yet.
                </div>
            {% endif %}
        </div>
        
        <!-- QR Codes Section -->
        <div class="qr-section">
            <div class="section-title">
                <span>üì±</span> QR Codes for Printing
            </div>
            
            <div class="qr-grid">
                {% for question in hunt.questions %}
                <div class="qr-item">
                    <img src="/qr/{{ question.qr_filename }}" alt="QR Code" class="qr-image">
                    <div>Question {{ loop.index }}</div>
                    <div style="font-size: 0.8em; color: #666; margin-top: 5px;">
                        <a href="/qr/{{ question.qr_filename }}" download>Download</a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="button-group">
            <a href="/teacher/dashboard" class="btn btn-secondary">‚Üê Back to Dashboard</a>
            <a href="/teacher/hunt/{{ hunt._id }}/edit" class="btn btn-primary">‚úèÔ∏è Edit Hunt</a>
            <a href="#" class="btn btn-primary" style="background: #2196F5;" onclick="window.print()">üñ®Ô∏è Print QR Codes</a>
        </div>
    </div>
</body>
</html>