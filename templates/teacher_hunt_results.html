<!DOCTYPE html>
<html>
<head>
    <title>Hunt Results - {{ hunt.name }}</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; background: #f5f7fa; color: #333; }
        .navbar { background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%); color: white; padding: 20px 40px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.8em; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        .nav-links { display: flex; gap: 20px; }
        .nav-link { color: white; text-decoration: none; padding: 8px 15px; border-radius: 5px; transition: background 0.3s; }
        .container { max-width: 1000px; margin: 40px auto; padding: 0 20px; }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: #666; text-decoration: none; margin-bottom: 20px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .page-title { font-size: 2em; color: #333; }
        .results-card { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; padding: 15px; background: #f8f9fa; color: #666; font-weight: bold; border-bottom: 2px solid #eee; }
        td { padding: 15px; border-bottom: 1px solid #eee; }
        .score-badge { padding: 5px 12px; border-radius: 20px; font-weight: bold; font-size: 0.9em; }
        .score-high { background: #e8f5e9; color: #2e7d32; }
        .score-medium { background: #fff3e0; color: #ef6c00; }
        .score-low { background: #ffebee; color: #c62828; }
        .btn { padding: 10px 20px; border-radius: 5px; text-decoration: none; font-weight: bold; transition: 0.3s; cursor: pointer; border: none; }
        .btn-primary { background: #4CAF50; color: white; }
        .btn-secondary { background: #f5f5f5; color: #666; border: 1px solid #ddd; }
        .empty-state { text-align: center; padding: 50px; color: #999; }
        .empty-icon { font-size: 4em; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="logo"><span>üéØ</span> Scavenger Hunt</div>
        <div class="nav-links">
            <a href="/teacher/dashboard" class="nav-link">Dashboard</a>
            <a href="/logout" class="nav-link">Logout</a>
        </div>
    </div>

    <div class="container">
        <a href="/teacher/hunt/{{ hunt.id }}/view" class="back-link">‚Üê Back to "{{ hunt.name }}"</a>

        <div class="header">
            <h1 class="page-title">Hunt Results: {{ hunt.name }}</h1>
            <button class="btn btn-secondary" onclick="window.print()">Print Results</button>
        </div>

        <div class="results-card">
            {% if submissions %}
                <table>
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Score</th>
                            <th>Completed</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for sub in submissions %}
                        <tr>
                            <td><strong>{{ sub.student_name }}</strong></td>
                            <td>
                                {% set percentage = (sub.total_score / sub.max_score * 100)|int if sub.max_score > 0 else 0 %}
                                <span class="score-badge {% if percentage >= 80 %}score-high{% elif percentage >= 50 %}score-medium{% else %}score-low{% endif %}">
                                    {{ sub.total_score }} / {{ sub.max_score }} ({{ percentage }}%)
                                </span>
                            </td>
                            <td>{{ sub.completed_questions }} / {{ sub.total_questions }}</td>
                            <td>{{ sub.completed_at.strftime('%Y-%m-%d %H:%M') }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <div class="empty-state">
                    <div class="empty-icon">üìä</div>
                    <h2>No Submissions Yet</h2>
                    <p>When students complete the hunt, their results will appear here.</p>
                </div>
            {% endif %}
        </div>
    </div>
</body>
</html>
